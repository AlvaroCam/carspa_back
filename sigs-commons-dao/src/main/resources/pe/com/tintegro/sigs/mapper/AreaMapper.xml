<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
		
<mapper namespace="pe.com.tintegro.sigs.mapper.AreaMapper">
	<resultMap id = "areaResultMap" type = "pe.com.tintegro.sigs.entidad.general.Item">
		<result property = "ID" column = "id"/>
		<result property = "valor" column = "descripcion"/>
	</resultMap>
	
	<resultMap id = "areasResultMap" type = "pe.com.tintegro.sigs.entidad.Area">
		<result property = "idArea" column = "id_area"/>
		<result property = "descripcionArea" column = "descripcion_area"/>
		<result property = "abreviaturaArea" column = "abreviatura_area"/>
		<result property = "nuTotalReg" column = "nu_total_reg"/>
		
	</resultMap>
	
	<resultMap id = "confirmacionResultMap" type = "pe.com.tintegro.sigs.entidad.general.Confirmacion">
		<result property = "id" column = "id_result"/>
		<result property = "mensaje" column = "mensaje"/>
    </resultMap>
	
	<select id = "obtenerAreas" resultMap = "areaResultMap">
		SELECT * FROM "Admision".fn_ad_select_area(#{idIPRESS}, 
												   #{idArea},
												   #{codUsuario});
	</select>
	
	<select id = "obtenerAreasConsultaAmbulatoria" resultMap = "areaResultMap">
		SELECT * FROM "Admision".fn_ad_select_area_cita(#{idIPRESS}, 
												   		#{idArea},
												   		#{codUsuario});
	</select>
		
	<select id="obtenerAreasSinAlmacen" resultMap="areaResultMap">
		SELECT * FROM "Admision".fn_ad_select_area_sin_almacen( #{ idArea }, 
															    #{ idIPRESS },
															    #{ codUsuario });
	</select>
	
	<select id = "obtenerAreasMaestra" resultMap = "areasResultMap">
	SELECT * FROM "Admision".fn_ad_select_area_maestra(#{descripcionArea},
													   #{numPagina},
													   #{numRegisMostrar})
	</select>
	
	<select id = "insertarArea" resultMap = "confirmacionResultMap">
	SELECT * FROM "Admision".fn_ad_insert_area(#{descripcionArea},
											   #{abreviaturaArea});
	</select>
	
	<select id = "eliminarArea" resultMap = "confirmacionResultMap">
	SELECT * FROM "Admision".fn_ad_delete_area(#{idArea})
	</select>
</mapper>	
	